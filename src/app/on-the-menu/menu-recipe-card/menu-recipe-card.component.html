<article aria-labelledby="recipe-title"
    class="md:w-76 flex w-64 flex-col items-stretch justify-between overflow-hidden rounded-md border border-gray-200 bg-gray-50 shadow-md transition-all duration-300 hover:border-gray-300 hover:no-underline hover:shadow-lg lg:w-72 2xl:w-80">
    <a class="focus:outline-none focus:ring focus:ring-primary">
        <figure class="relative aspect-[4/3] w-full overflow-hidden">
            <img 
                [src]="recipe()?.image"
                [alt]="recipe()?.label"
                class="object-cover w-full h-full"
                [srcset]="(recipe()?.images?.SMALL?.url || '') + ' 640w, ' +
                (recipe()?.images?.REGULAR?.url || '') + ' 1024w, ' +
                ((recipe()?.images?.LARGE?.url ?? recipe()?.images?.REGULAR?.url) || '') + ' 1280w'
                " />
            <figcaption
                class="absolute bottom-2 rounded-r bg-primary px-2 py-1 text-[10px] font-bold uppercase leading-4 tracking-widest text-white">
                {{recipe()?.totalTime! <= 15 ? '15 MIN MEAL' : getLabel()}}
            </figcaption>
        </figure>
        <h3 id="recipe-title" class="line-clamp-2 px-4 pt-2 text-center font-chronicle !text-base !font-semibold capitalize text-primary">
            {{recipe()?.label}}
        </h3>
    </a>
    <section class="mb-3 px-4 py-2 flex flex-col gap-y-4 tracking-wider" aria-label="Recipe nutritional information and tags">
        <footer class="flex divide-x divide-gray-300 border-b border-t text-primary-info py-3 px-2 text-xs">
            <span class="w-1/2">
                <span class="font-semibold text-checkbox-tick-blue">{{recipe()?.calories}}</span> &nbsp;CALORIES
            </span>
            <span class="text-right w-1/2">
                <span class="font-semibold text-checkbox-tick-blue">{{recipe()?.ingredientLines?.length}}</span>&nbsp;INGREDIENTS
            </span>
        </footer>
        <ul class="flex items-center gap-2 text-xs font-semibold text-blue-info">
            @let isRecipeVegetarian = isVegetarian();
            <li class="contents">
                <img [src]="timeIcon.path" [alt]="timeIcon.alt" />
                <time [attr.datetime]="recipe()?.totalTime + 'M'" [ngClass]="{ 'inline-block border-r pr-2': isRecipeVegetarian}">{{recipe()?.totalTime + ' MIN'}}</time>
            </li>
            @if(isRecipeVegetarian){
                <li>
                    <img [src]="vegIcon.path" [alt]="vegIcon.alt" />
                </li>
            }
        </ul>
        <a [href]="recipe()?.url" target="_blank"
            class="text-xs font-semibold text-gray20 underline-offset-2 hover:underline">
            {{recipe()?.source}}
        </a>
    </section>
</article>